import{c as K,r as t,j as r,d as R,e as B}from"./index-2444a23b.js";import{U as O}from"./upload-cloud-013d167b.js";/**
 * @license lucide-react v0.299.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=K("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]),S=[{code:"EN",label:"English"},{code:"EN-GB",label:"English (UK)"},{code:"EN-US",label:"English (US)"},{code:"DE",label:"German"},{code:"FR",label:"French"},{code:"ES",label:"Spanish"},{code:"IT",label:"Italian"},{code:"JA",label:"Japanese"},{code:"KO",label:"Korean"},{code:"PT-BR",label:"Portuguese (BR)"},{code:"PT-PT",label:"Portuguese (EU)"},{code:"ZH",label:"Chinese (simplified)"}],q=[{value:"default",label:"Balanced"},{value:"less",label:"More casual"},{value:"more",label:"More formal"}],F=({settings:c})=>{var v;const[a,L]=t.useState("translate"),[n,f]=t.useState("EN"),[u,y]=t.useState("DE"),[g,A]=t.useState("default"),[d,b]=t.useState(""),[k,p]=t.useState(""),[w,j]=t.useState(!1),[N,o]=t.useState(""),[x,D]=t.useState(""),i=(v=c==null?void 0:c.deeplApiKey)==null?void 0:v.trim(),h=!!i,E=t.useMemo(()=>({Authorization:`DeepL-Auth-Key ${i}`,"Content-Type":"application/x-www-form-urlencoded"}),[i]),T=t.useMemo(()=>!i||i.toLowerCase().endsWith(":fx")?"https://api-free.deepl.com":"https://api.deepl.com",[i]),P=()=>{f(u),y(n),b(k),p(d)},C=()=>{const e=new URLSearchParams,l=x?`${x}

${d}`:d;return e.append("text",l),e.append("target_lang",u),a==="translate"&&n&&e.append("source_lang",n),g!=="default"&&e.append("formality",g),a==="write"&&(e.set("target_lang",n||"EN"),e.set("source_lang",n||"EN")),e},I=async()=>{var e,l;if(!h){o("Add a DeepL API key in Settings to use this workspace.");return}if(!d.trim()){o("Enter some text to get started.");return}j(!0),o("");try{const s=await fetch(`${T}/v2/translate`,{method:"POST",headers:E,body:C().toString()});if(!s.ok)throw new Error(`DeepL error ${s.status}`);const m=await s.json(),U=((l=(e=m==null?void 0:m.translations)==null?void 0:e[0])==null?void 0:l.text)||"";p(U)}catch(s){console.error(s),s instanceof Error&&s.message.includes("DeepL error 403")?o("DeepL rejected the request. Double-check your API key and whether it requires the paid endpoint at api.deepl.com."):s instanceof Error&&s.message.includes("DeepL error 456")?o("DeepL quota exceeded for the current billing period. Try again after resetting your allowance."):o("Unable to reach DeepL. Confirm your API key, endpoint, and network access.")}finally{j(!1)}},M=t.useMemo(()=>h?a==="write"?"DeepL Write uses translation under the hood. Provide tone hints to steer the rewriting.":"Choose source and target languages, then translate instantly with DeepL.":"Add a DeepL API key in Settings → AI Integration to enable translation and writing.",[h,a]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:"DeepL Workspace"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"High-quality translations and AI writing guidance directly inside your task manager."})]}),r.jsx("div",{className:"flex items-center rounded-full bg-gray-100 px-1 py-1 dark:bg-[#1A1D24]",children:["translate","write"].map(e=>r.jsxs("button",{onClick:()=>L(e),className:`flex items-center gap-1 rounded-full px-4 py-1.5 text-xs font-medium transition ${a===e?"bg-white text-indigo-600 shadow-sm dark:bg-[#232734] dark:text-indigo-200":"text-gray-500 hover:text-gray-800 dark:text-gray-300"}`,children:[e==="translate"?r.jsx(O,{className:"w-4 h-4"}):r.jsx(R,{className:"w-4 h-4"}),e==="translate"?"Translate":"Write"]},e))})]}),r.jsxs("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-800 dark:bg-[#0F1115]",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 text-xs text-gray-600 dark:text-gray-400",children:[r.jsx("span",{children:M}),a==="write"&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:"Tone hint:"}),r.jsx("input",{value:x,onChange:e=>D(e.target.value),placeholder:"e.g., Friendly, concise, persuasive...",className:"w-60 rounded-lg border border-gray-300 px-3 py-1 focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-[#1A1D24] dark:text-gray-100 dark:focus:ring-indigo-500/40"})]})]}),r.jsxs("div",{className:"mt-6 grid gap-4 md:grid-cols-[minmax(0,1fr)_auto_minmax(0,1fr)] items-stretch",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[r.jsx("label",{className:"font-semibold uppercase tracking-wide",children:"Source"}),a==="translate"&&r.jsx("select",{value:n,onChange:e=>f(e.target.value),className:"rounded-lg border border-gray-300 px-2 py-1 text-xs focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-[#1A1D24] dark:text-gray-100 dark:focus:ring-indigo-500/40",children:S.map(e=>r.jsx("option",{value:e.code,children:e.label},e.code))})]}),r.jsx("textarea",{value:d,onChange:e=>b(e.target.value),placeholder:a==="translate"?"Paste text to translate…":"Paste text to rewrite with DeepL Write…",className:"h-60 w-full resize-none rounded-2xl border border-gray-200 bg-gray-50 px-4 py-3 text-sm leading-relaxed text-gray-800 shadow-inner focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-[#10131A] dark:text-gray-100 dark:focus:ring-indigo-500/40"})]}),r.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[r.jsx("button",{onClick:P,disabled:a==="write",className:"rounded-full border border-gray-300 p-2 text-gray-500 transition hover:text-indigo-500 disabled:cursor-not-allowed disabled:opacity-40 dark:border-gray-700 dark:text-gray-300",children:r.jsx(_,{className:"w-4 h-4"})}),r.jsx("button",{onClick:I,disabled:w,className:"rounded-full bg-indigo-600 px-5 py-2 text-sm font-semibold text-white shadow-md transition hover:bg-indigo-500 disabled:opacity-60",children:w?"Processing…":a==="translate"?"Translate":"Rewrite"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[r.jsx("label",{className:"font-semibold uppercase tracking-wide",children:"Output"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("select",{value:u,onChange:e=>y(e.target.value),className:"rounded-lg border border-gray-300 px-2 py-1 text-xs focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-[#1A1D24] dark:text-gray-100 dark:focus:ring-indigo-500/40",children:S.map(e=>r.jsx("option",{value:e.code,children:e.label},e.code))}),r.jsx("select",{value:g,onChange:e=>A(e.target.value),className:"rounded-lg border border-gray-300 px-2 py-1 text-xs focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-[#1A1D24] dark:text-gray-100 dark:focus:ring-indigo-500/40",children:q.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),r.jsx("textarea",{value:k,onChange:e=>p(e.target.value),placeholder:"Your DeepL output will appear here…",className:"h-60 w-full resize-none rounded-2xl border border-gray-200 bg-white px-4 py-3 text-sm leading-relaxed text-gray-800 shadow-inner focus:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-200 dark:border-gray-700 dark:bg-[#10131A] dark:text-gray-100 dark:focus:ring-indigo-500/40"})]})]}),N&&r.jsx("p",{className:"mt-4 text-sm text-rose-500",children:N})]})]})};F.propTypes={settings:B.object.isRequired};export{F as default};
